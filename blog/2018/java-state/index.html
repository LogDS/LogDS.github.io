<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <script>!function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a),s="dataLayer"!=n?"&l="+n:"";m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id="+r+s,g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer","GTM-NSD65SPX");</script> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Process algebra and StateCharts | LogDS Lab </title> <meta name="author" content="Giacomo Bergami"> <meta name="description" content="This post showcases the possibility of hardcoding State-Machines in Java in a Object-Oriented way via Calculus of Concurrent Systems"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%93%9A&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://logds.github.io/blog/2018/java-state/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css"> <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script> <script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#edeff5",text:"#838391"},button:{background:"#4b81e8"}},theme:"classic",position:"bottom-right",type:"opt-out",content:{message:"This website uses cookies for Google Analytics to track the number of visits to the site.",dismiss:"Accept Cookies",deny:"Decline Cookies"}})});</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NSD65SPX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> LogDS Lab </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">PI's cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">research </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/repositories/">repositories</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Process algebra and StateCharts</h1> <p class="post-meta"> Created in September 16, 2018 </p> <p class="post-tags"> <a href="/blog/2018"> <i class="fa-solid fa-calendar fa-sm"></i> 2018 </a>   ·   <a href="/blog/tag/java"> <i class="fa-solid fa-hashtag fa-sm"></i> java</a>   <a href="/blog/tag/programming"> <i class="fa-solid fa-hashtag fa-sm"></i> programming</a>   <a href="/blog/tag/statecharts"> <i class="fa-solid fa-hashtag fa-sm"></i> statecharts</a>   <a href="/blog/tag/css"> <i class="fa-solid fa-hashtag fa-sm"></i> CSS</a>   ·   <a href="/blog/category/sample-posts"> <i class="fa-solid fa-tag fa-sm"></i> sample-posts</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>If we want to model an access to a resource that could not be read and written at the same time, we could use either process algebra or State Charts from UML analysis. In either cases the desired object is an element that could perform both read and write operations, without changing the type of the element or to remember to close and re-open the object in a different state.</p> \[P = \textup{read}.P + \textup{read}.P\] <p><img src="https://raw.githubusercontent.com/jackbergus/LucenePdfIndexer/master/images/Diagramma1_2.png" alt="P = read.P + write.P" style="margin:auto; display:block;"></p> <p>We know that usually it is not good to keep reading and writing operations on the same object, and hence we have always to close and re-open the object if we want to change the type of the operation. As a consequence we have to handle three objects at a time, an initial state (<code class="language-plaintext highlighter-rouge">P</code>), an opened state for reading purposes (<code class="language-plaintext highlighter-rouge">R</code>) and another one for writing (<code class="language-plaintext highlighter-rouge">W</code>). This could be easily modelled as follows</p> \[\begin{cases} P = \textup{openRead}.R + \textup{openWrite}.W &amp; \\ R = \textup{read}.R + \textup{close}.P &amp; \\ W = \textup{write}.W + \textup{close}.P &amp; \end{cases}\] <p><img src="https://raw.githubusercontent.com/jackbergus/LucenePdfIndexer/master/images/twostates_2.png" alt="Representing states P, R and W" style="margin:auto; display:block;"></p> <p>Now we want to hide all the open and close operations, and hence we want to define an object, that is a State Machine, that keeps track of all the object states and then “smartly decides” which operations have to be carried out in order to reach the desired operation to execute.</p> \[\begin{cases} ClosedObject = \overline{\textup{OpenRead}}.\overline{\textup{close}}.ClosedObject + \overline{\textup{OpenWrite}}.\overline{\textup{close}}.ClosedObject&amp; \\ ReadableObject = {\textup{OpenRead}}.R&amp; \\ WritableObject = {\textup{OpenWrite}}.W&amp; \\ R = \textup{read}.R + \textup{close}.ReadableObject&amp; \\ W = \textup{write}.W + \textup{close}.WritableObject&amp; \end{cases}\] \[(\nu (\textup{OpenRead},\textup{OpenWrite},\textup{close})) ( ClosedObject | ReadableObject | WritableObjeect)\] <p><img src="https://raw.githubusercontent.com/jackbergus/LucenePdfIndexer/master/images/complete_2.png" alt="Representing the synchronized states" style="margin:auto; display:block;"></p> <p>We could easily see that this implementation corresponds to the first tone, that is the model that we want to reach.</p> <h2 id="using-interfaces-to-implement-the-internal-states">Using Interfaces to implement the internal states</h2> <p>Firstly, we must declare in Java that closed, opened, readable and writable states belong to a same type of object. This allows define an unique interface for any possible state of the internal object.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Defines a document that could be opened, closed, read and written.
 */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ReadWriteDocument</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div> <p>As a next step we could define a closed object, that could only perform some open actions towards either the readable or the writable object. An ErrOptional object returns either a value or an error, that could be a Throwable object or a simple (error) Message as a string.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * This is the default state when an object is opened. It is neither ready to be read, nor ready to be written.
 * In order to perform a read or a write action, I have first to perform an open action
 */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Closed</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">ReadWriteDocument</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">DoRead</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;&gt;</span> <span class="nf">openRead</span><span class="o">();</span>
    <span class="kd">public</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">DoWrite</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;&gt;</span> <span class="nf">openWrite</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div> <p>Consequently the writable object could be implemented as follows:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DoWrite</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Opened</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">writeObject</span><span class="o">(</span><span class="no">T</span> <span class="n">obj</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p>Readable objects could be implemented in a similar fashon. If the underlying implementation allows to read and write at the same time, we could even define an interface that allows to perform both operations as follows:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DoReadWrite</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">DoRead</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;,</span> <span class="nc">DoWrite</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span> <span class="o">}</span>
</code></pre></div></div> <h2 id="implementing-the-interfaces-for-lucene-5">Implementing the interfaces for Lucene 5</h2> <p>At this point we define a simple class, that could be easily mapped into a Lucene Document.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LucenePaper</span> <span class="kd">extends</span> <span class="nc">LuceneDocument</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="n">text</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">bibtexkey</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LucenePaper</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">,</span> <span class="nc">String</span> <span class="n">bibtexkey</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">bibtexkey</span> <span class="o">=</span> <span class="n">bibtexkey</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">LucenePaper</span><span class="o">(</span><span class="nc">Document</span> <span class="n">doc</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">doc</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">bibtexkey</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"text"</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">bibtexkey</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"bibtexkey"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>At this point we could implement the <code class="language-plaintext highlighter-rouge">ClosedObject</code> as the object that could perform some outgoing operations into either a readable state or a writable one.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClosedLuceneIndex</span> <span class="kd">implements</span> <span class="nc">Closed</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">StandardAnalyzer</span> <span class="n">analyzer</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">FSDirectory</span> <span class="n">index</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">File</span> <span class="n">directory</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ClosedLuceneIndex</span><span class="o">(</span><span class="nc">File</span> <span class="n">directory</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">analyzer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StandardAnalyzer</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">directory</span> <span class="o">=</span> <span class="n">directory</span><span class="o">;</span>
        <span class="c1">// Link the directory on the FileSystem to the application</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">index</span> <span class="o">=</span> <span class="nc">FSDirectory</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="n">directory</span><span class="o">.</span><span class="na">toPath</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="n">index</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">exists</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nc">DirectoryReader</span><span class="o">.</span><span class="na">indexExists</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>


    <span class="cm">/**
     * Creates the Write configuration as a Lucene object
     * @return
     */</span>
    <span class="kd">public</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">IndexWriter</span><span class="o">&gt;</span> <span class="nf">writeConfiguration</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">IndexWriterConfig</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">IndexWriterConfig</span><span class="o">(</span><span class="n">analyzer</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">IndexWriter</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="n">config</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">raiseError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Generates the Read configuration as a Lucene object
     * @return
     */</span>
    <span class="kd">public</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">IndexSearcher</span><span class="o">&gt;</span> <span class="nf">openConfiguration</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">IndexReader</span> <span class="n">ir</span> <span class="o">=</span> <span class="nc">DirectoryReader</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
            <span class="nc">IndexSearcher</span> <span class="n">searcher</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">IndexSearcher</span><span class="o">(</span><span class="n">ir</span><span class="o">);</span>
            <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">searcher</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">raiseError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Generates the Readable state
     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">DoRead</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;&gt;</span> <span class="nf">openRead</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">IndexSearcher</span><span class="o">&gt;</span> <span class="n">wc</span> <span class="o">=</span> <span class="n">openConfiguration</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">wc</span><span class="o">.</span><span class="na">hasValue</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">DoRead</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LuceneRead</span><span class="o">(</span><span class="n">directory</span><span class="o">,</span><span class="n">wc</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
            <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">d</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">wc</span><span class="o">.</span><span class="na">doCast</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Generates the Writable state
     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">DoWrite</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;&gt;</span> <span class="nf">openWrite</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">IndexWriter</span><span class="o">&gt;</span> <span class="n">wc</span> <span class="o">=</span> <span class="n">writeConfiguration</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">wc</span><span class="o">.</span><span class="na">hasValue</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">DoWrite</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LuceneWrite</span><span class="o">(</span><span class="n">directory</span><span class="o">,</span><span class="n">wc</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
            <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">d</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">wc</span><span class="o">.</span><span class="na">doCast</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>As a next step we could implement a <code class="language-plaintext highlighter-rouge">LuceneRead</code> class that closes the indices and returns a <code class="language-plaintext highlighter-rouge">ClosedLuceneIndex</code> and a <code class="language-plaintext highlighter-rouge">LuceneWrite</code> class that does the same thing for the write indices.</p> <h2 id="implementing-the-state-machine">Implementing the State Machine</h2> <p>Since Java7, we could define a class as implementing the <code class="language-plaintext highlighter-rouge">AutoCloseable</code> interface: this means that we know that any object is closed correctly after the <code class="language-plaintext highlighter-rouge">try…catch</code> clause as follows:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="o">(</span><span class="nc">LuceneStateMachine</span> <span class="n">newObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LuceneStateMachine</span><span class="o">(</span><span class="n">file</span><span class="o">))</span> <span class="o">{</span>
	<span class="c1">//use the newObject</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
	<span class="c1">//do something</span>
<span class="o">}</span>
</code></pre></div></div> <p>The State Machine could be initialized as starting in the closed state as follows:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LuceneStateMachine</span> <span class="kd">implements</span> <span class="nc">AutoCloseable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">ReadWriteDocument</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;</span> <span class="n">state</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LuceneStateMachine</span><span class="o">(</span><span class="nc">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ClosedLuceneIndex</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>We could check the closed state as follows:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="cm">/**
     * Closes the index through the state machine.
     */</span>
    <span class="kd">public</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">&gt;</span> <span class="nf">stateClose</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">Closed</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;&gt;</span> <span class="n">elem</span> <span class="o">=</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">raiseMessageError</span><span class="o">(</span><span class="s">"Error: unmatched case in closing element"</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">instanceof</span> <span class="nc">Closed</span><span class="o">)</span>
            <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">instanceof</span> <span class="nc">DoRead</span><span class="o">)</span>
            <span class="n">elem</span> <span class="o">=</span> <span class="o">((</span><span class="nc">LuceneRead</span><span class="o">)</span> <span class="n">state</span><span class="o">).</span><span class="na">close</span><span class="o">();</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">instanceof</span> <span class="nc">DoWrite</span><span class="o">)</span>
            <span class="n">elem</span> <span class="o">=</span> <span class="o">((</span><span class="nc">LuceneWrite</span><span class="o">)</span> <span class="n">state</span><span class="o">).</span><span class="na">close</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">elem</span><span class="o">.</span><span class="na">hasValue</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
            <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">elem</span><span class="o">.</span><span class="na">doCast</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="cm">/**
     * Automatically closes the object
     * @throws Exception
     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">&gt;</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">stateClose</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">cs</span><span class="o">.</span><span class="na">isError</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">cs</span><span class="o">.</span><span class="na">isThrowable</span><span class="o">())</span>
                <span class="n">cs</span><span class="o">.</span><span class="na">getError</span><span class="o">().</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">cs</span><span class="o">.</span><span class="na">isMessage</span><span class="o">())</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">cs</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"HALT"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div> <p>Now we could implement all the method that have been declared in the DoRead and DoWrite interfaces in the state machine, where each method has to perform the following methods in order to check if the machine is on the correct state and, if not, to perform the state transaction to the correct one.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">&gt;</span> <span class="nf">prepareRead</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">if</span> <span class="o">(!(</span><span class="n">state</span> <span class="k">instanceof</span> <span class="nc">DoRead</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">stateClose</span><span class="o">();</span>
        <span class="c1">//returns the error if not correct execution</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">l</span><span class="o">.</span><span class="na">hasValue</span><span class="o">())</span> <span class="k">return</span> <span class="n">l</span><span class="o">.</span><span class="na">doCast</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">get</span><span class="o">()==</span><span class="kc">false</span><span class="o">)</span> <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">raiseMessageError</span><span class="o">(</span><span class="s">"Error while closing the element"</span><span class="o">);</span>

        <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">DoRead</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="o">((</span><span class="nc">ClosedLuceneIndex</span><span class="o">)</span> <span class="n">state</span><span class="o">).</span><span class="na">openRead</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">hasValue</span><span class="o">())</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">doCast</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">&gt;</span> <span class="nf">prepareWrite</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!(</span><span class="n">state</span> <span class="k">instanceof</span> <span class="nc">DoWrite</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">stateClose</span><span class="o">();</span>
        <span class="c1">//returns the error if not correct execution</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">l</span><span class="o">.</span><span class="na">hasValue</span><span class="o">())</span> <span class="k">return</span> <span class="n">l</span><span class="o">.</span><span class="na">doCast</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">get</span><span class="o">()==</span><span class="kc">false</span><span class="o">)</span> <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">raiseMessageError</span><span class="o">(</span><span class="s">"Error while closing the element"</span><span class="o">);</span>

        <span class="nc">ErrOptional</span><span class="o">&lt;</span><span class="nc">DoWrite</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="o">((</span><span class="nc">ClosedLuceneIndex</span><span class="o">)</span> <span class="n">state</span><span class="o">).</span><span class="na">openWrite</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">hasValue</span><span class="o">())</span>
           <span class="n">state</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
        <span class="k">else</span>
           <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">doCast</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="nc">ErrOptional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p>As a final result, we could read and write a Lucene Index trivially as follows:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Ok: if there are no documents, there are no documents added yet</span>
<span class="c1">//In Java7, this statement ensures that the object will be closed at the end of the road</span>
<span class="k">try</span> <span class="o">(</span><span class="nc">LuceneStateMachine</span> <span class="n">state</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LuceneStateMachine</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"/Users/vasistas/luceneindexstate"</span><span class="o">)))</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">getSize</span><span class="o">().</span><span class="na">isError</span><span class="o">())</span> <span class="o">{</span>
        <span class="c1">//add some papers</span>
        <span class="n">state</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="k">new</span> <span class="nc">LucenePaper</span><span class="o">(</span><span class="s">"this is some long text"</span><span class="o">,</span><span class="s">"key1"</span><span class="o">));</span>
        <span class="n">state</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="k">new</span> <span class="nc">LucenePaper</span><span class="o">(</span><span class="s">"this is some short text"</span><span class="o">,</span><span class="s">"key2"</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Added some papers and closed"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="c1">//performing some read operations</span>
        <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">get</span><span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">getSize</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Has size"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"size: "</span><span class="o">+</span><span class="n">size</span><span class="o">);</span>

        <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">LucenePaper</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">get</span><span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">asIterable</span><span class="o">());</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">LucenePaper</span> <span class="n">p</span> <span class="o">:</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">text</span> <span class="o">+</span><span class="s">" -- "</span> <span class="o">+</span> <span class="n">p</span><span class="o">.</span><span class="na">bibtexkey</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//performing a write operation</span>
        <span class="n">size</span><span class="o">++;</span>
        <span class="n">state</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="k">new</span> <span class="nc">LucenePaper</span><span class="o">(</span><span class="s">"This is the new paper, number "</span><span class="o">+</span><span class="n">size</span><span class="o">,</span><span class="s">"key"</span><span class="o">+</span><span class="n">size</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Added some new paper and closed"</span><span class="o">);</span>


    <span class="o">}</span>
   <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
   <span class="o">}</span>
<span class="c1">//Closing the object automatically at the end of the code block: Java7</span>
</code></pre></div></div> <p>You can find the full source code for this project at <a href="https://github.com/jackbergus/LucenePdfIndexer" rel="external nofollow noopener" target="_blank">https://github.com/jackbergus/LucenePdfIndexer</a></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/generating-code-plantuml/">Code generation from PlantUML</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2017/hacking-reMarkable/">A journey towards Hacking my reMarkable</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2017/streaminglive/">How to embed a ScreenCast into a Web Page through Node.js</a> </li> </div> </div> <style>#cookie-notice{padding:.5rem 1rem;display:none;text-align:center;position:fixed;bottom:0;width:calc(100% - 2rem);background:#222;color:rgba(255,255,255,0.8)}#cookie-notice a{display:inline-block;cursor:pointer;margin-left:.5rem}@media(max-width:767px){#cookie-notice span{display:block;padding-top:3px;margin-bottom:1rem}#cookie-notice a{position:relative;bottom:4px}}</style> <div id="cookie-notice"> <span>We would like to use third party cookies and scripts to improve the functionality of this website.</span> <a id="cookie-notice-accept" class="btn btn-primary btn-sm">Approve</a> <a id="cookie-notice-deny" class="btn btn-primary btn-sm">Deny</a> <a href="/privacy" class="btn btn-primary btn-sm">More info</a> </div> <script>function createCookie(e,o,t){var n="";if(t){var i=new Date;i.setTime(i.getTime()+24*t*60*60*1e3),n="; expires="+i.toUTCString()}document.cookie=e+"="+o+n+"; path=/"}function readCookie(e){for(var o=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(o))return i.substring(o.length,i.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}if("true"==readCookie("cookie-notice-option")){function loadScriptAsync(e,o){if("function"!=typeof o)throw new Error("Not a valid callback for async script load");var t=document.createElement("script");t.onload=o,t.src=e,document.head.appendChild(t)}loadScriptAsync("https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",function(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-QNGBK8G5H2",{anonymize_ip:!0})})}else"false"!=readCookie("cookie-notice-option")&&(document.getElementById("cookie-notice").style.display="block");document.getElementById("cookie-notice-accept").addEventListener("click",function(){createCookie("cookie-notice-option","true",31),document.getElementById("cookie-notice").style.display="none",location.reload()}),document.getElementById("cookie-notice-deny").addEventListener("click",function(){createCookie("cookie-notice-option","false",31),document.getElementById("cookie-notice").style.display="none",location.reload()});</script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-QNGBK8G5H2"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-QNGBK8G5H2");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/tabs.min.js?b8748955e1076bbe0dabcf28f2549fdc"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-pi-39-s-cv",title:"PI&#39;s cv",description:"",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"nav-people",title:"people",description:"current members of the LogDS group",section:"Navigation",handler:()=>{window.location.href="/people/"}},{id:"dropdown-publications",title:"publications",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-projects",title:"projects",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-repositories",title:"repositories",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"nav-teaching",title:"teaching",description:"Materials for courses LogDS team members.",section:"Navigation",handler:()=>{window.location.href="/teaching/"}},{id:"post-code-generation-from-plantuml",title:"Code generation from PlantUML",description:"This post provides a brief explanation on how to connect visualization tools to code generation, without using propietary software.",section:"Posts",handler:()=>{window.location.href="/blog/2025/generating-code-plantuml/"}},{id:"post-process-algebra-and-statecharts",title:"Process algebra and StateCharts",description:"This post showcases the possibility of hardcoding State-Machines in Java in a Object-Oriented way via Calculus of Concurrent Systems",section:"Posts",handler:()=>{window.location.href="/blog/2018/java-state/"}},{id:"post-a-journey-towards-hacking-my-remarkable",title:"A journey towards Hacking my reMarkable",description:"reMarkable is Linux and partially FOSS. This means that it can be easily accessed and customized. For the moment, I&#39;m trying to fix some minor problems of the device. I&#39;m going to update this post with the solutions I came up with.",section:"Posts",handler:()=>{window.location.href="/blog/2017/hacking-reMarkable/"}},{id:"post-how-to-embed-a-screencast-into-a-web-page-through-node-js",title:"How to embed a ScreenCast into a Web Page through Node.js",description:"This brief post will tell ya how to create a live stream and to make it available to any user that has a web browser. This is possible since you can always redirect a mpeg stream into a WebSocket, and then show the content in a web page via JavaScript thanks to WebGL and Canvas2D renderers.",section:"Posts",handler:()=>{window.location.href="/blog/2017/streaminglive/"}},{id:"projects-project-5",title:"project 5",description:"a project with a background image",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-project-6",title:"project 6",description:"a project with no image",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"projects-datagramdb",title:"DatagramDB",description:"An implementation of a main-memory database supporting the General Semistructured Model with a Graph Grammar-driven Query Language",section:"Projects",handler:()=>{window.location.href="/projects/DatagramDB/"}},{id:"projects-knobab",title:"KnoBAB",description:"A fast LTLf Log-SAT Solver and miner with Data Payload",section:"Projects",handler:()=>{window.location.href="/projects/KnoBAB/"}},{id:"projects-lassi",title:"LaSSI",description:"A pipeline for machine-readable and explainable Natural Language Processing.",section:"Projects",handler:()=>{window.location.href="/projects/LaSSI/"}},{id:"projects-simulatororchestrator",title:"SimulatorOrchestrator",description:"A simulator for osmotic and 6G smart-city architectures.",section:"Projects",handler:()=>{window.location.href="/projects/SimulatorOrchestrator/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%62%65%72%67%61%6D%69%67%69%61%63%6F%6D%6F@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=W2Uk0xwAAAAJ","_blank")}},{id:"socials-semantic-scholar",title:"Semantic Scholar",section:"Socials",handler:()=>{window.open("https://www.semanticscholar.org/author/2242718848","_blank")}},{id:"socials-scopus",title:"Scopus",section:"Socials",handler:()=>{window.open("https://www.scopus.com/authid/detail.uri?authorId=57193856589","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/jackbergus","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/bergami","_blank")}},{id:"socials-x",title:"X",description:"Twitter",section:"Socials",handler:()=>{window.open("https://twitter.com/gyankos","_blank")}},{id:"socials-wikidata",title:"Wikidata",section:"Socials",handler:()=>{window.open("https://www.wikidata.org/wiki/Q130844495","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>